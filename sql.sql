CREATE DATABASE PARCIAL1;
USE PARCIAL1;

CREATE TABLE TIPOEMPLEADO(
idTipoEmpleado INT NOT NULL,
nombre VARCHAR(60),
estatus TINYINT
);
ALTER TABLE TIPOEMPLEADO ADD PRIMARY KEY(idTipoEmpleado); 

CREATE TABLE TIPOVENTA(
idTipoVenta INT NOT NULL,
nombre VARCHAR(60),
estatus TINYINT
);
ALTER TABLE TIPOVENTA ADD PRIMARY KEY(idTipoVenta);

CREATE TABLE CLIENTE(
nitCliente INT,
nombres VARCHAR(85),
apellidos VARCHAR(85)
);
ALTER TABLE CLIENTE ADD PRIMARY KEY(nitCliente);

CREATE TABLE EMPLEADO(
idEmpleado INT NOT NULL,
nombres VARCHAR(100),
apellidos VARCHAR(100),
fechaContratacion DATETIME,
fechaNacimiento DATETIME,
sueldo DOUBLE(8,2),
estatus TINYINT,
idTipoEmpleado INT
);
ALTER TABLE EMPLEADO ADD PRIMARY KEY(idEmpleado);
ALTER TABLE EMPLEADO ADD CONSTRAINT fk_emptipo FOREIGN KEY (idTipoEmpleado) REFERENCES TIPOEMPLEADO (idTipoEmpleado);

CREATE TABLE CORREOEMPLEADO(
idCorreoEmpleado INT NOT NULL,
correo VARCHAR(105),
idEmpleado INT,
estatus TINYINT
);
ALTER TABLE CORREOEMPLEADO ADD PRIMARY KEY(idCorreoEmpleado);
ALTER TABLE CORREOEMPLEADO ADD CONSTRAINT fk_correoemp FOREIGN KEY (idEmpleado) REFERENCES EMPLEADO (idEmpleado);

CREATE TABLE TELEFONOEMPLEADO(
idTelefonoEmpleado INT NOT NULL,
telefono VARCHAR(105),
idEmpleado INT,
estatus TINYINT
);
ALTER TABLE TELEFONOEMPLEADO ADD PRIMARY KEY(idTelefonoEmpleado);
ALTER TABLE TELEFONOEMPLEADO ADD CONSTRAINT fk_telefonoemp FOREIGN KEY (idEmpleado) REFERENCES EMPLEADO (idEmpleado);

CREATE TABLE COTIZACION(
idCotizacion INT NOT NULL,
nombre VARCHAR(90),
fechaCotizacion DATETIME,
fechaInicio DATETIME,
fechaFin DATETIME,
nitCliente INT,
estatus TINYINT
);
ALTER TABLE COTIZACION ADD PRIMARY KEY(idCotizacion);
ALTER TABLE COTIZACION ADD CONSTRAINT fk_cotcliente FOREIGN KEY (nitCliente) REFERENCES CLIENTE (nitCliente);

CREATE TABLE PRODUCTO(
idProducto INT NOT NULL,
nombre VARCHAR(100),
descripcion VARCHAR(400),
precio DOUBLE(8,2),
estatus TINYINT
);
ALTER TABLE PRODUCTO ADD PRIMARY KEY(idProducto);

CREATE TABLE INVENTARIOENCABEZADO(
idInventarioEncabezado INT NOT NULL,
fecha DATETIME,
estatus TINYINT
);
ALTER TABLE INVENTARIOENCABEZADO ADD PRIMARY KEY(idInventarioEncabezado);

CREATE TABLE INVENTARIODETALLE(
idInventarioEncabezado INT NOT NULL,
idProducto INT,
cantidad INT,
estatus TINYINT
);
ALTER TABLE INVENTARIODETALLE ADD PRIMARY KEY(idInventarioEncabezado,idProducto);
ALTER TABLE INVENTARIODETALLE ADD CONSTRAINT fk_invdetaprod FOREIGN KEY (idProducto) REFERENCES PRODUCTO (idProducto);
ALTER TABLE INVENTARIODETALLE ADD CONSTRAINT fk_invdetenc FOREIGN KEY (idInventarioEncabezado) REFERENCES INVENTARIOENCABEZADO (idInventarioEncabezado);

CREATE TABLE FACTURAENCABEZADOCONTADO(
idFacturaEncabezadoContado INT NOT NULL,
serie VARCHAR(45),
fecha DATETIME,
nitCliente INT,
total DOUBLE(8,2),
estatus TINYINT,
idTipoVenta INT
);
ALTER TABLE FACTURAENCABEZADOCONTADO ADD PRIMARY KEY(idFacturaEncabezadoContado);
ALTER TABLE FACTURAENCABEZADOCONTADO ADD CONSTRAINT fk_facenctipoventa FOREIGN KEY (idTipoVenta) REFERENCES TIPOVENTA (idTipoVenta);
ALTER TABLE FACTURAENCABEZADOCONTADO ADD CONSTRAINT fk_facencacont FOREIGN KEY (nitCliente) REFERENCES CLIENTE (nitCliente);

CREATE TABLE FACTURADETALLECONTADO(
idFacturaEncabezadoContado INT,
idProducto INT,
cantidad INT
);
ALTER TABLE FACTURADETALLECONTADO ADD PRIMARY KEY(idFacturaEncabezadoContado,idProducto);
ALTER TABLE FACTURADETALLECONTADO ADD CONSTRAINT fk_facencdetProd FOREIGN KEY (idProducto) REFERENCES PRODUCTO (idProducto);
ALTER TABLE FACTURADETALLECONTADO ADD CONSTRAINT fk_facencdetenc FOREIGN KEY (idFacturaEncabezadoContado) REFERENCES FACTURAENCABEZADOCONTADO (idFacturaEncabezadoContado);

CREATE TABLE TIPOCREDITO(
idTipoCredito INT NOT NULL,
nombre VARCHAR(85),
cantidadDias INT
);
ALTER TABLE TIPOCREDITO ADD PRIMARY KEY(idTipoCredito);

CREATE TABLE FACTURAENCABEZADOCREDITO(
idFacturaEncabezadoCredito INT NOT NULL,
serie VARCHAR(45),
fecha DATETIME,
nitCliente INT,
total DOUBLE(8,2),
estatus TINYINT,
idTipoCredito INT,
idTipoVenta INT,
claveCredito DOUBLE(8,2),
estadoFactura TINYINT
);
ALTER TABLE FACTURAENCABEZADOCREDITO ADD PRIMARY KEY(idFacturaEncabezadoCredito);
ALTER TABLE FACTURAENCABEZADOCREDITO ADD CONSTRAINT fk_facencacrednit FOREIGN KEY (nitCliente) REFERENCES CLIENTE (nitCliente);
ALTER TABLE FACTURAENCABEZADOCREDITO ADD CONSTRAINT fk_facencacredtipocred FOREIGN KEY (idTipoCredito) REFERENCES TIPOCREDITO (idTipoCredito);
ALTER TABLE FACTURAENCABEZADOCREDITO ADD CONSTRAINT fk_facencacredtipoventa FOREIGN KEY (idTipoVenta) REFERENCES TIPOVENTA (idTipoVenta);



CREATE TABLE FACTURADETALLECREDITO(
idFacturaEncabezadoCredito INT,
idProducto INT,
cantidad INT
);
ALTER TABLE FACTURADETALLECREDITO ADD PRIMARY KEY(idFacturaEncabezadoCredito,idProducto);
ALTER TABLE FACTURADETALLECREDITO ADD CONSTRAINT fk_facdetcredfacen FOREIGN KEY (idFacturaEncabezadoCredito) REFERENCES FACTURAENCABEZADOCREDITO (idFacturaEncabezadoCredito);
ALTER TABLE FACTURADETALLECREDITO ADD CONSTRAINT fk_facdetcred FOREIGN KEY (idProducto) REFERENCES PRODUCTO (idProducto);



CREATE TABLE TIPOCOMISION(
idTipoComision INT NOT NULL,
nombre VARCHAR(100)
);
ALTER TABLE TIPOCOMISION ADD PRIMARY KEY(idTipoComision);

CREATE TABLE COMISION(
idComision INT NOT NULL,
idEmpleado INT,
idTipoComision INT,
comision DOUBLE(8,2)
);
ALTER TABLE COMISION ADD PRIMARY KEY(idComision);
ALTER TABLE COMISION ADD CONSTRAINT fk_comemp FOREIGN KEY (idEmpleado) REFERENCES EMPLEADO (idEmpleado);
ALTER TABLE COMISION ADD CONSTRAINT fk_comtipo FOREIGN KEY (idTipoComision) REFERENCES TIPOCOMISION (idTipoComision);

CREATE TABLE PEDIDOENCABEZADO(
idPedidoEncabezado INT NOT NULL,
fecha DATETIME,
nitEmpresa INT,
total DOUBLE(8,2),
estatus TINYINT,
idTipoVenta INT
);
ALTER TABLE PEDIDOENCABEZADO ADD PRIMARY KEY(idPedidoEncabezado);
ALTER TABLE PEDIDOENCABEZADO ADD CONSTRAINT fk_pedidoencatpventa FOREIGN KEY (idTipoVenta) REFERENCES TIPOVENTA (idTipoVenta);

CREATE TABLE PEDIDODETALLE(
idPedidoEncabezado INT,
idProducto INT,
cantidad INT
);
ALTER TABLE PEDIDODETALLE ADD PRIMARY KEY(idPedidoEncabezado,idProducto);
ALTER TABLE PEDIDODETALLE ADD CONSTRAINT fk_pedidodetenca FOREIGN KEY (idPedidoEncabezado) REFERENCES PEDIDOENCABEZADO (idPedidoEncabezado);
ALTER TABLE PEDIDODETALLE ADD CONSTRAINT fk_pedidodetprodd FOREIGN KEY (idProducto) REFERENCES PRODUCTO (idProducto);

CREATE TABLE PROVEEDOR(
idProveedor INT NOT NULL,
nombre VARCHAR(105),
direccion VARCHAR(200),
estatus TINYINT
);
ALTER TABLE PROVEEDOR ADD PRIMARY KEY(idProveedor);

CREATE TABLE CORREOPROVEEDOR(
idCorreoProveedor INT NOT NULL,
correo VARCHAR(105),
idProveedor INT,
estatus TINYINT
);
ALTER TABLE CORREOPROVEEDOR ADD PRIMARY KEY(idCorreoProveedor);
ALTER TABLE CORREOPROVEEDOR ADD CONSTRAINT fk_correoprov FOREIGN KEY (idProveedor) REFERENCES PROVEEDOR (idProveedor);

CREATE TABLE TELEFONOPROVEEDOR(
idTelefonoProveedor INT NOT NULL,
telefono VARCHAR(105),
idProveedor INT,
estatus TINYINT
);
ALTER TABLE TELEFONOPROVEEDOR ADD PRIMARY KEY(idTelefonoProveedor);
ALTER TABLE TELEFONOPROVEEDOR ADD CONSTRAINT fk_telefonoprov FOREIGN KEY (idProveedor) REFERENCES PROVEEDOR (idProveedor);


CREATE TABLE COMPRAPROVEEDORENCABEZADO(
idCompraProveedorEncabezado INT NOT NULL,
serie VARCHAR(45),
fecha DATETIME,
nit VARCHAR(10),
total DOUBLE(8,2),
estatus TINYINT,
idProveedor INT,
pago TINYINT
);
ALTER TABLE COMPRAPROVEEDORENCABEZADO ADD PRIMARY KEY(idCompraProveedorEncabezado);
ALTER TABLE COMPRAPROVEEDORENCABEZADO ADD CONSTRAINT fk_compraprovenc FOREIGN KEY (idProveedor) REFERENCES PROVEEDOR (idProveedor);


CREATE TABLE COMPRAPROVEEDORDETALLE(
idCompraProveedorEncabezado INT NOT NULL,
idProducto INT,
cantidad INT
);
ALTER TABLE COMPRAPROVEEDORDETALLE ADD PRIMARY KEY(idCompraProveedorEncabezado,idProducto);
ALTER TABLE COMPRAPROVEEDORDETALLE ADD CONSTRAINT fk_compraprocdetprodd FOREIGN KEY (idProducto) REFERENCES PRODUCTO (idProducto);
ALTER TABLE COMPRAPROVEEDORDETALLE ADD CONSTRAINT fk_compraprocdetenc FOREIGN KEY (idCompraProveedorEncabezado) REFERENCES COMPRAPROVEEDORENCABEZADO (idCompraProveedorEncabezado);


CREATE TABLE FONDO(
idFondo INT,
Cantidad DOUBLE(8,2)
);
ALTER TABLE FONDO ADD PRIMARY KEY(idFondo);


INSERT INTO FONDO VALUES(1,95846);



INSERT INTO CLIENTE VALUES (123456,'Marco','Polo');
INSERT INTO CLIENTE VALUES (234567,'Nelson','Mandela');
INSERT INTO CLIENTE VALUES (345678,'Aquiles','Voy');
INSERT INTO CLIENTE VALUES (456789,'Houston','Problem');
INSERT INTO CLIENTE VALUES (567890,'Skynet','Tomson');
INSERT INTO CLIENTE VALUES (678901,'Luci','Fernandez');
INSERT INTO CLIENTE VALUES (789012,'John','Vázquez');

INSERT INTO TIPOCREDITO VALUES(1,"Corto plazo",30);
INSERT INTO TIPOCREDITO VALUES(2,"Mediano plazo",60);
INSERT INTO TIPOCREDITO VALUES(3,"Largo plazo",90);

INSERT INTO TIPOVENTA VALUES(1,"Menor",true);
INSERT INTO TIPOVENTA VALUES(2,"Mayor",true);
INSERT INTO TIPOVENTA VALUES(3,"Super",true);

INSERT INTO PRODUCTO VALUES(1,"Trigo","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(2,"Maiz","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(3,"Soja","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(4,"Cebada","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(5,"Arroz","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(6,"Maní","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(7,"Papa","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(8,"Limon","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(9,"Garbanzo","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(10,"Tabaco","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(11,"Petuñas","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(12,"Crema","Excelente condicion",12.50,true);
INSERT INTO PRODUCTO VALUES(13,"Queso","Excelente condicion",12.50,true);


INSERT INTO FACTURAENCABEZADOCREDITO VALUES(1,"ABC",'2020-01-25 1:30:00',123456,4568.50,true,1,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(2,"ABC",'2020-06-22 13:30:00',456789,7568.50,false,2,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(3,"ABC",'2020-07-23 18:30:00',123456,6568.50,false,3,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(4,"ABC",'2020-08-26 15:30:00',234567,72568.50,false,2,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(5,"ABC",'2020-04-1 16:30:00',789012,45238.50,true,1,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(6,"ABC",'2020-08-2 17:30:00',456789,123568.50,false,2,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(7,"ABC",'2020-02-5 2:30:00',456789,9568.50,true,1,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(8,"ABC",'2020-06-14 8:30:00',123456,9568.50,false,3,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(9,"ABC",'2020-07-15 23:30:00',678901,15568.50,false,3,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(10,"ABC",'2020-05-15 1:30:00',678901,32568.50,false,2,1,1234,true);
INSERT INTO FACTURAENCABEZADOCREDITO VALUES(11,"ABC",'2020-08-17 12:30:00',678901,44568.50,false,1,1,1234,true);

INSERT INTO FACTURADETALLECREDITO VALUES(1,1,45);
INSERT INTO FACTURADETALLECREDITO VALUES(2,2,50);
INSERT INTO FACTURADETALLECREDITO VALUES(3,3,60);
INSERT INTO FACTURADETALLECREDITO VALUES(4,4,35);
INSERT INTO FACTURADETALLECREDITO VALUES(5,5,44);
INSERT INTO FACTURADETALLECREDITO VALUES(6,6,80);
INSERT INTO FACTURADETALLECREDITO VALUES(7,7,65);
INSERT INTO FACTURADETALLECREDITO VALUES(8,8,55);
INSERT INTO FACTURADETALLECREDITO VALUES(9,9,46);
INSERT INTO FACTURADETALLECREDITO VALUES(10,10,68);

INSERT INTO PROVEEDOR VALUES(1,"SA","FLORIDA ST 4",true);
INSERT INTO PROVEEDOR VALUES(2,"SAN LORENZO","CALIFORNIA",true);
INSERT INTO PROVEEDOR VALUES(3,"INTRUMENTA","PERÚ",true);
INSERT INTO PROVEEDOR VALUES(4,"AGRITEXTOS","GUATEMALA, MIXCO",true);
INSERT INTO PROVEEDOR VALUES(5,"BRAZILIA SA.","BRAZIL, RIO",true);


INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(1,"AVC",'2020-01-25 1:30:00',123456,45568.50,true,1,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(2,"AVC",'2020-06-22 13:30:00',456789,74568.50,true,2,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(3,"AVC",'2020-07-23 18:30:00',123456,61568.50,true,3,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(4,"AVC",'2020-08-26 15:30:00',234567,72568.50,true,4,true);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(5,"AVC",'2020-04-1 16:30:00',789012,445238.50,true,1,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(6,"AVC",'2020-08-2 17:30:00',456789,1253568.50,true,2,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(7,"AVC",'2020-02-5 2:30:00',456789,95658.50,true,5,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(8,"AVC",'2020-06-14 8:30:00',123456,95688.50,true,3,true);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(9,"AVC",'2020-07-15 23:30:00',678901,155468.50,true,3,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(10,"AVC",'2020-05-15 1:30:00',678901,32568.50,true,2,false);
INSERT INTO COMPRAPROVEEDORENCABEZADO VALUES(11,"AVC",'2020-08-17 12:30:00',678901,44568.50,true,1,false);


